# YikYak.NET - 3rd Party API
Made for Windows (Phone) 8.1
---
This is an **unofficial** Open Source implementation of the YikYak API made primarily for use in my application **[Jabber](http://www.windowsphone.com/en-us/store/app/jabber/6ab56d80-f66f-411b-9579-20011e7dac19)** which you can download for free on the Windows Phone Apps+Games Store

It is made with .NET 4.5 and Windows (Phone) 8.1 in mind, though one could fairly easily rework it to fit your own needs.

*Current Official YikYak API Version: 2.5.1*

*This library is licensed with GPL2.0 with an additional constraint (listed at the bottom of this README).  Please remember to include the same license and attribution to my original source in your own projects.*

Notes:
---
* This project has a dependency on `NodaTime`, which can be easily installed via NuGet in Visual Studio. ([src](http://nodatime.org/))
* This project requires that your application request Internet and Location capabilities, and because it requests Location capabilities your Application should prompt the user to accept using Location **PRIOR** to initializing the API.
* I have not presently tested if this project also works on Windows 8.1, but it builds ... so take that as you will.  
* Additionally, with just **ONE** exception, you can expect this library to guarantee persistence between sessions on the same device, even between un/installs. (More on this below)
* I have purposely omitted some critical parts within `Config.cs` because I cannot in good conscience simply reveal encryption keys (and similar).  You can pursue finding these on your own will.  Under no circumstance will I ever make this information public.

Usage:
---
Let's get down-and-dirty right quick, so you can go ahead an use this Library.
1. You absolutely **must** discover the value for `Config.URI_ENCRYPTION_KEY` in order to use any part of this Library as all API calls are hashed/signed with it.
2. After you have done that, the proper (and only) way to use the API is to call something along the lines of:
```C#
public async Task myInitializerFunc(...):
{
	...
    YikYak.API YikYakAPI = await YikYak.API.GetInstance();
    if (YikYakAPI == null) { /* ERROR */ }
    ...
}
```
3. The next call which should follow, in order to simulate the official YikYak Application closely, should be `YikYakAPI.GetLocalRecent()`, but this is at your discretion.  I highly suggest taking some time to analyze how the official YikYak App functions in order to model how your requests are made.
4. That is basically it!  Most calls to the `YikYak.API` object will return of type `YikYak.Response<T>` and so you should check the `Result` field of the returned object to verify success as well as check the `Return` field before making any assumptions as a call can technically succeed without returning data!
5. Have fun! :)

----------

** Only look farther if you want to know more about the API's implementation.  The rest of this is for 'educational' purposes **

----------

API:
---
Okay, so here is a bit about the API.  This will just cover some basics so you can better understand the implementation (should you be looking into it).

**User IDs**
> YikYak creates UserIDs which are supposed to be unique per device.

> However, in testing on Android, it would appear that isn't necessarily the case.

> This .NET Library provides the ability to guarantee the same User ID is generated for the same device and the same application instance by using `ASHWID`'s (`A`pplication `S`pecific `H`ard`W`are `ID`).  That being said, the User ID is dependent on those things remaining constant, thusly this library works best on Phones.  This is the exception I mentioned above: if the hardware state of a device changes after the first run of the application, then the following is to be expected:

>> Because this library stores a valid User ID in the Local Settings storage, it should continue to operate normally unless the application data is corrupted, or the application is un/reinstalled.  In this case, a new ID will be generated on the current `ASHWID`.

> Further, this library has a `UserIDGenerationMethod` setting which currently supports 4 options: `Standard`, `Reversed`, `Doubled`, and `Palindrome`.  You can look into what these mean in the source code.  It should be noted that only `Standard` guarantees uniqueness across Windows (Phone) 8.1 devices and that changing this method could result in being unable to return to your original User ID if you encounter the change-of-hardware scenario I just mentioned.

> Luckily, User ID problems are generally non-existant on Phone, but because it would appear that Android's official YikYak app generates IDs using random `UUID`s as well as their own hardware specific ID, there is a possibility of an ID generated by this library overlapping with one generated by Android or iPhone.  If this is the case, you can usually tell because on first 'creating' it, the Yakarma will not be 100, or during use one may notice up/down-votes they didn't place or Yaks/Comments they didin't make.  Handle these scenarios as you will.

**Registration & POST Access**
> As a form of protection, YikYak will allow only users who have successfully registered with their API hosting service ([Parse](https://www.parse.com)) to perform any API call which requires a POST.  This is where you will need to have discovered (on your own) the correct values for `PARSE_ENCRYPTION_KEY` and `PARSE_CONSUMER_ID`.  Failure to have these will not result in being unable to use the application, but will result in being limited to *viewing* and *voting on* Yaks/Comments (basically any non-POST API call).  There is a private field `POST_ACCESS` within `YikYak.API` for telling you if an instance of the API does in fact have full POST access.  Feel free to make this a Property (or `public readonly`) if you wish for your project.

> You can see a listing of which API calls require POST/GET in API Grid.xlsx on the Sheet corresponding to the most recent API version which is implemented here.

**Performing Calls**
> Avoid making various repeated calls, as that is an abuse of YikYak's API.  Try to keep navigation cached so as to avoid having to reload information via an API call every time a page is navigated to/from.  The best approach is either working with `NavigationCacheMode` or `PageState`.  Like I mentioned above, look at the official YikYak App to see how they manage these states, so that you can strive to do the same.

**TravelMode**
> You may notice two functions `EnableTravelMode` and `DisableTravelMode` which you are free to use.  These basically force caching of the last location gathered by the application so that a user can continue to use YikYak in that location.  There is a danger to turning this off when at a distance from their cached location in that it would make it easier for YikYak (if they were to try) to catch that generated ID as fraudulent/non-official.  Exercise 'common sense' in how you let your users use this feature.

**Settings**
> Not part of the Web API, but part of this Library is the `YikYak.Settings` class, where a variety of fields are available as Properties to change.  Be careful changing these, as they may inadvertently mess up later initializations of the API.  Look into the implementation before making changes to these to ensure you can do so safely.

> These settings are stored, as you'll see, in `ApplicationData.Current.LocalSettings` which means that they DO NOT sync across devices, nor are they persistent between un/installs.  That is, every time you uninstall all the settings get wiped and reinstalling will force re-registration of the same User ID (which isn't a problem, really).  They are set up this way primarily because of the difference between `ASHWID`s on Phones, Tablets, and Desktops.  Once I (or a contributor) have figured out a reasonable way to manage this, they may be moved to cloud-synced settings.

Getting Involved:
---
I would love to have others contribute to this as well as get feedback on possible bugs/issues.  Note, however, that this library is not intended to implement features beyond those which YikYak officially supports.  That is something you can do in your own applications.

Further, this Library is licensed under GPL 2.0 with the additional constraint that when you discover the correct values which I have omitted in `YikYak.Config`, you may under **absolutely no circumstances** publicly share those values.  My intention is not to compromise YikYak in any way, but to provide an accessible library for creating YikYak-based applications on Windows platforms.

Please remember to attribute credit where credit is due when using this library in your own projects, and CODE ON!!!
